--- name:default

# Minimum system time in seconds between two updates of the status ports
transformer_status_period: 1.0

# from frame for the transformer frame names
visual_odometry_source_frame: "body"
# to frame for the transformer frame names
visual_odometry_target_frame: "navigation"

# from frame for the transformer
delta_visual_odometry_source_frame: "body" #transformer names. No transformation convention
# to frame for the transformer
delta_visual_odometry_target_frame: "body_k-1" #transformer names. No transformation convention

# Visual Odometry Stereo parameters. Including intrinsic and extrinsic camera calibration parameters among othersfor a full parameter list have a look at viso2Types.hpp and at viso_stereo.h of the viso2 library
viso2_parameters:
  ransac_iters: 200 #number of RANSAC iterations
  inlier_threshold: 1.5 #fundamental matrix inlier threshold
  reweighting: true #lower border weights (more robust to calibration errors)
  match:
    nms_n: 3 #non-max-suppression: min. distance between maxima (in pixels)
    nms_tau: 50 #non-max-suppression: interest point peakiness threshold
    match_binsize: 50 #matching bin width/height (affects efficiency only) Step size for matching features (forward/backward and right/left)
    match_radius: 200 #matching radius (du/dv in pixels)
    match_disp_tolerance: 1 #dv tolerance for stereo matches (in pixels)
    outlier_disp_tolerance: 5 #outlier removal: disparity tolerance (in pixels)
    outlier_flow_tolerance: 5 #outlier removal: flow tolerance (in pixels)
    multi_stage: 1 #0=disabled,1=multistage matching (denser and faster)
    half_resolution: 1 #0=disabled,1=match at half resolution, refine at full resolution
    refinement: 2 #refinement (0=none,1=pixel,2=subpixel)
  bucket:
    max_features: 3 #maximal number of features per bucket
    bucket_width: 10.0 #width of bucket
    bucket_height: 10.0 #height of bucket

# Set to true if output debug information is desirable. This enabled the feature correspondance frame output.
#output_debug: false
output_debug: true
image_ouput_type: :INTRA_MATCHES #:INTRA_MATCHES #:INTER_KEYPOINTS

--- name:bumblebee
# the global name that should be used for the internal left_camera frame
#left_camera_viso2_frame: "left_camera_viso2"

# the global name that should be used for the internal body frame
#body_frame: "body"

# maximum latency, in seconds, of the stream aligner. The aligner will start

# dropping samples if the difference between the last output and last input is
# greater than this
transformer_max_latency: 1.0
# minimum time, in s, between two sequential samples arrive on left_frame
left_frame_period: 0.4
# minimum time, in s, between two sequential samples arrive on right_frame
right_frame_period: 0.4

# params set 1
#viso2_parameters:
#  ransac_iters: 200 #number of RANSAC iterations
#  inlier_threshold: 1.5 #fundamental matrix inlier threshold
#  reweighting: true #lower border weights (more robust to calibration errors)
#  match:
#    nms_n: 3 #non-max-suppression: min. distance between maxima (in pixels)
#    nms_tau: 50 #non-max-suppression: interest point peakiness threshold
#    match_binsize: 50 #matching bin width/height (affects efficiency only) Step size for matching features (forward/backward and right/left)
#    match_radius: 200 #matching radius (du/dv in pixels)
#    match_disp_tolerance: 1 #dv tolerance for stereo matches (in pixels)
#    outlier_disp_tolerance: 5 #outlier removal: disparity tolerance (in pixels)
#    outlier_flow_tolerance: 5 #outlier removal: flow tolerance (in pixels)
#    multi_stage: 1 #0=disabled,1=multistage matching (denser and faster)
#    half_resolution: 1 #0=disabled,1=match at half resolution, refine at full resolution
#    refinement: 2 #refinement (0=none,1=pixel,2=subpixel)
#  bucket:
#    max_features: 3 #maximal number of features per bucket
#    bucket_width: 10.0 #width of bucket
#    bucket_height: 10.0 #height of bucket

# params set 2
#viso2_parameters:
#    #base: 1.0
#  ransac_iters: 200 #number of RANSAC iterations
#  inlier_threshold: 1.5 #fundamental matrix inlier threshold
#  reweighting: true #lower border weights (more robust to calibration errors)
#  match:
#    nms_n: 3 #non-max-suppression: min. distance between maxima (in pixels)
#    nms_tau: 50 #non-max-suppression: interest point peakiness threshold
#    match_binsize: 50 #matching bin width/height (affects efficiency only) Step size for matching features (forward/backward and right/left)
#    match_radius: 350 #200 #matching radius (du/dv in pixels)
#    match_disp_tolerance: 2 #1 #dv tolerance for stereo matches (in pixels)
#    outlier_disp_tolerance: 5 #outlier removal: disparity tolerance (in pixels)
#    outlier_flow_tolerance: 5 #outlier removal: flow tolerance (in pixels)
#    multi_stage: 1 #0=disabled,1=multistage matching (denser and faster)
#    half_resolution: 1 #0=disabled,1=match at half resolution, refine at full resolution
#    refinement: 2 #refinement (0=none,1=pixel,2=subpixel)
#  bucket:
#    max_features: 3 #maximal number of features per bucket
#    bucket_width: 10.0 #width of bucket
#    bucket_height: 10.0 #height of bucket

# params set 3 (new from viso2.zip)
viso2_parameters:
  ransac_iters: 300 #200 #number of RANSAC iterations
  inlier_threshold: 2.0 #1.5 #fundamental matrix inlier threshold
  reweighting: true #lower border weights (more robust to calibration errors)
  match:
    nms_n: 3 #non-max-suppression: min. distance between maxima (in pixels)
    nms_tau: 50 #non-max-suppression: interest point peakiness threshold
    match_binsize: 50 #matching bin width/height (affects efficiency only) Step size for matching features (forward/backward and right/left)
    match_radius: 350 #200 #matching radius (du/dv in pixels)
    match_disp_tolerance: 2 #1 #dv tolerance for stereo matches (in pixels)
    outlier_disp_tolerance: 5 #outlier removal: disparity tolerance (in pixels)
    outlier_flow_tolerance: 5 #outlier removal: flow tolerance (in pixels)
    multi_stage: 1 #0=disabled,1=multistage matching (denser and faster)
    half_resolution: 1 #0=disabled,1=match at half resolution, refine at full resolution
    refinement: 1 #2 #refinement (0=none,1=pixel,2=subpixel)
  bucket:
    max_features: 10 #2 #3 #maximal number of features per bucket
    bucket_width: 50.0 #10.0 #width of bucket
    bucket_height: 50.0 #10.0 #height of bucket


output_debug: true 
image_ouput_type: :INTRA_MATCHES #INTRA_MATCHES #:INTER_KEYPOINTS

    
##camera_calib_1
#calib_parameters:
#  camLeft:
#    fx: 837.253850
#    fy: 838.490409
#    cx: 500.836269
#    cy: 396.129781
#    d0: -0.350699 
#    d1: 0.143871 
#    d2: 0.000772 
#    d3: 0.000436
#    ex: 0.0
#    ey: 0.0
#    width: 1024
#    height: 768
#  camRight:
#    fx: 840.576003
#    fy: 839.660192
#    cx: 486.582638
#    cy: 390.268319
#    d0: -0.349734 
#    d1: 0.140961 
#    d2: 0.000373 
#    d3: 0.000030
#    ex: 0.0
#    ey: 0.0
#    width: 1024
#    height: 768
##Distance between left and right camera
#  extrinsic:
#    tx: 0.12185240164807148
#    ty: -0.01948076202153522
#    tz: 0.039816877115110094
#    rx: 0.000012901913800443746
#    ry: 0.00038610733653918344
#    rz: 0.00033187483729531205

##camera_calib_2
calib_parameters:
  camLeft:
    fx: 822.227706935
    fy: 822.927185544
    cx: 500.570003209
    cy: 389.677579798
    d0: -0.329304723377
    d1: 0.111047291678
    d2: 0.00112087517133
    d3: -0.000214995608353
    width: 1024
    height: 768
    ex: 0.0
    ey: 0.0
  camRight:
    fx: 826.863502923
    fy: 825.62436397
    cx: 490.041877899
    cy: 382.244076897
    d0: -0.335039958312
    d1: 0.119533691278
    d2: 0.000731208184955
    d3: -0.00070900223821
    width: 1024
    height: 768
    ex: 0.0
    ey: 0.0
#Distance between left and right camera
  extrinsic:
    tx: 0.1204224030000000
    ty: -0.0003256255180000000
    tz: 0.00007402001730000000
    rx: 0.001819615757731449
    ry: 0.008842211883599646
    rz: 0.003584645009846816

## camera_calib_3
#calib_parameters:
#  camLeft:
#    fx: 837.98636
#    fy: 838.56569
#    cx: 509.74846
#    cy: 376.99711
#    d0: -0.35914
#    d1: 0.16317
#    d2: 0.00039
#    d3: 0.00041
#    ex: 0.06887
#    ey: 0.08192
#    width: 1024
#    height: 768
#  camRight:
#    fx: 837.40801
#    fy: 838.06473
#    cx: 536.53701
#    cy: 377.66591
#    d0: -0.35499
#    d1: 0.15218
#    d2: 0.00019
#    d3: -0.00016
#    ex: 0.07723
#    ey: 0.08236
#    width: 1024
#    height: 768
##Distance between left and right camera
#  extrinsic:
#    tx: 0.12042814 #baseline in x (meters)
#    ty: 0.00063857 #baseline in y (meters)
#    tz: 0.0003051 #baseline in z (meters)
#    rx: 0.00125 #rotation along x (rad)
#    ry: -0.00333 #rotation along y (rad)
#    rz: 0.00542 #rotation along z (rad)


##camera_calib_4
#calib_parameters:
#  camLeft:
#    fx: 822.227706935
#    fy: 822.927185544
#    cx: 500.570003209
#    cy: 389.677579798
#    d0: -0.329304723377
#    d1: 0.111047291678
#    d2: 0.00112087517133
#    d3: -0.000214995608353
#    width: 1024
#    height: 768
#    ex: 0.0
#    ey: 0.0
#  camRight:
#    fx: 826.863502923
#    fy: 825.62436397
#    cx: 490.041877899
#    cy: 382.244076897
#    d0: -0.335039958312
#    d1: 0.119533691278
#    d2: 0.000731208184955
#    d3: -0.00070900223821
#    width: 1024
#    height: 768
#    ex: 0.0
#    ey: 0.0
##Distance between left and right camera
#  extrinsic:
#    tx: -0.1204224030000000
#    ty: 0.0003256255180000000
#    tz: -0.00007402001730000000
#    rx: -0.001819615757731449
#    ry: -0.008842211883599646
#    rz: -0.003584645009846816



##camera_calib_5
#calib_parameters:
#  camLeft:
#    fx: 835.613262
#    fy: 836.518170
#    cx: 501.407573
#    cy: 397.561462
#    d0: -0.343033
#    d1: 0.133004
#    d2: 0.000646
#    d3: -0.000385
#    width: 1024
#    height: 768
#    ex: 0.0
#    ey: 0.0
#  camRight:
#    fx: 842.605017
#    fy: 841.620232
#    cx: 488.470336
#    cy: 394.619559
#    d0: -0.354349
#    d1: 0.153314
#    d2: -0.000513
#    d3: -0.000609
#    width: 1024
#    height: 768
#    ex: 0.0
#    ey: 0.0
##Distance between left and right camera
#  extrinsic:
#    tx: 0.1197151995243167
#    ty: 0.003396114170968318
#    tz: -0.008476374462101683
#    rx: 0.004282030930230953
#    ry: 0.009139639185479510
#    rz: 0.01149874602976915



##camera_calib_6 (for exoter_bb2)
calib_parameters:
  camLeft:
    fx: 836.06946050655949 
    fy: 836.14916268708816
    cx: 516.37155418305281
    cy: 377.29889017486101
    d0: -0.3389695490988
    d1:  0.1217553065872
    d2:  0.0002936920143
    d3:  0.0000878463732
    width: 1024
    height: 768
    ex: 0.0
    ey: 0.0
  camRight:
    fx: 832.27804742153376
    fy: 832.56239966940871
    cx: 507.37637964982628
    cy: 380.63748343529795
    d0: -0.33914092102560
    d1:  0.12092692896553
    d2:  0.00062442626516
    d3: -0.00038293414690
    width: 1024
    height: 768
    ex: 0.0
    ey: 0.0
#Distance between left and right camera
  extrinsic:
    tx: 0.12001886209277160
    ty: -0.00025901217247349007
    tz: -0.00034917543917589172
    rx: 0.003734249504278
    ry: 0.006861413405440
    rz: -0.000787881379522


##camera_calib_7 (for exoter_bb3)
calib_parameters:
  camLeft:
    fx: 836.06946050655949 
    fy: 836.14916268708816
    cx: 516.37155418305281
    cy: 377.29889017486101
    d0: -0.3389695490988
    d1:  0.1217553065872
    d2:  0.0002936920143
    d3:  0.0000878463732
    width: 1024
    height: 768
    ex: 0.0
    ey: 0.0
  camRight:
    fx: 832.27804742153376
    fy: 832.56239966940871
    cx: 507.37637964982628
    cy: 380.63748343529795
    d0: -0.33914092102560
    d1:  0.12092692896553
    d2:  0.00062442626516
    d3: -0.00038293414690
    width: 1280
    height: 960
    ex: 0.0
    ey: 0.0
#Distance between left and right camera
  extrinsic:
    tx: 0.12001886209277160
    ty: -0.00025901217247349007
    tz: -0.00034917543917589172
    rx: 0.003734249504278
    ry: 0.006861413405440
    rz: -0.000787881379522
