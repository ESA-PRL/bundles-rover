#====================================================================================================
# PLTE #1 - First entire Sol on Mars. Main activities:
# 		- Rover Module commanded in Nominal Mode
# 		- Rover Module Check-out
# 		- LocCam and NavCam Images acquisition
#====================================================================================================

# Waits the transition Night to Day (driven by the RV PCDE, when PSAmax > 20W) and configure RV for day activities. 
EXEC    A1,	RV_WakeUp;

# Standby to nominal condition commanded through dedicated FOP
# - Upload RET
# - Set RET_Reliable flag to Reliable TC(155,3)
# - Command transition to Nominal Mode TC(160,1)
# - Command authorization of RV mechanisms TC(155,6)
# - Command authorization of RV HDRMS TC(155,1)

# Wait (09:00)
#EXEC    A2,	MMS_WaitAbsTime(33390);

# IMU Switch On for Chekout + Charge Trapping
#EXEC    A3,	GNC_MonitoringOnly;

# Wait suitable time to optimize energy balance + minimize warmup times + battery SoC at the end of the Sol (13:30)
#EXEC    A4,	MMS_WaitAbsTime(50085);

# Rover Module Check-out (#EXECution of the Rover Module initial functional checkout focused on elements necessary to support the Rover Egress (Rover Module Check-out will be completed after Rover egress) )
# - RV power S/S already ON and automatically exercised (background)
# - RV Data Handling S/S already ON and automatically exercised (background)
# - RV Thermal S/S already ON and automatically exercised (background)
# - RV TT&C S/S commissioned at later stage
# - RV ADE S/S can be checked out by switching it ON, wait 5min (TBD), and then back to OFF
#EXEC    A5,	ADEs_Activate(3,3,10800,-50,10800);
#EXEC    A6,	MMS_WaitRelTime(300);
#EXEC    A7,	ADEs_DeActivate(3000);
# - RV Mobility S/S cannot be exercised because all HDRM are still engaged. IMU already ON
# - RV Solar Arrays S/S cannot be exercised because all HDRM are still engaged.
# - RV Mast Assembly S/S cannot be exercised because all HDRM are still engaged.
# - PSF not needed for Egress, so no checkout performed.
# - PPL not needed for Egress. However PanCam is checked out as NavCam redundancy.
EXEC    A8,	PanCam_Initialise(1,1,1);
#EXEC    A9,	MMS_WaitRelTime(300);
EXEC    A10,	PanCam_PIUSwitchOff(1,1);

# LocCam and NavCam Images acquisition (with Rover Stowed and Mast folded)
EXEC    A11,	FRONT_ACQ(0,0,0);  
EXEC    A12,	HAZCAM_ACQ(0,0,0);
#EXEC    A11,	NavCam_TakeStereoImage;
#EXEC    A12,	LocCam_TakeStereoImage;

# Wait (17:00) and switch off IMU
#EXEC    A13,	MMS_WaitAbsTime(63070);
EXEC    A14,	GNC_SwitchOff;

#Wait the transition Day to Night (driven by the RV PCDE, when PSAmax < 20W) and configure the Rover for night
EXEC    A15,	RV_Prepare4Night;

# Wait until midnight
#EXEC    A16,	MMS_WaitAbsTime(89040);

END_SOL;
